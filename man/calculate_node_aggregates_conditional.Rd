% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_network.R
\name{calculate_node_aggregates_conditional}
\alias{calculate_node_aggregates_conditional}
\title{Calculate Node-Level Aggregate Statistics (Conditional on Significance)}
\usage{
calculate_node_aggregates_conditional(
  nodes_sep_df,
  nodes_orig_df,
  q_value,
  stat_col_name,
  ...
)
}
\arguments{
\item{nodes_sep_df}{Dataframe with metabolites separated (e.g., 'nodes_final').
Must contain Label, log2FC, qval.}

\item{nodes_orig_df}{Original dataframe with potentially semi-colon separated metabolites.
Must contain Label.}

\item{q_value}{Significance threshold for q-values (e.g., 0.05).}

\item{stat_col_name}{p value column name}

\item{...}{Column names of numeric values to be processed (e.g., log2FC, pval, qval).}
}
\value{
A list containing two dataframes:
  $nodes_separated: Input nodes_sep_df with 2 new columns:
    node_values, node_stat
  $nodes: Input nodes_orig_df with 2 new columns:
    node_values, node_stat
}
\description{
Calculates mean log2FC, p-value, and q-value for each node (Label),
prioritizing significant metabolites (qval <= q_value). If none are significant,
uses all measured metabolites for the node. Adds results to both dataframes.
}
