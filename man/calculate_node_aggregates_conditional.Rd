% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_network.R
\name{calculate_node_aggregates_conditional}
\alias{calculate_node_aggregates_conditional}
\title{Calculate Node-Level Aggregate Statistics (Conditional on Significance)}
\usage{
calculate_node_aggregates_conditional(
  nodes_sep_df,
  nodes_orig_df,
  q_value,
  plot_col_name,
  pval_col_name,
  qval_col_name
)
}
\arguments{
\item{nodes_sep_df}{Dataframe with metabolites separated (e.g., 'nodes_final').
Must contain Label, log2FC, pval, qval.}

\item{nodes_orig_df}{Original dataframe with potentially semi-colon separated metabolites.
Must contain Label.}

\item{q_value}{Significance threshold for q-values (e.g., 0.05).}

\item{plot_col_name}{plotted column}

\item{pval_col_name}{q value column name}

\item{qval_col_name}{p value column name}
}
\value{
A list containing two dataframes:
  $nodes_separated: Input nodes_sep_df with 5 new columns:
    node_log_value, node_p_value, node_q_value, node_add_col, used.
  $nodes: Input nodes_orig_df with 4 new columns:
    node_log_value, node_p_value, node_q_value, node_add_col.
}
\description{
Calculates mean log2FC, p-value, and q-value for each node (Label),
prioritizing significant metabolites (qval <= q_value). If none are significant,
uses all measured metabolites for the node. Adds results to both dataframes.
}
